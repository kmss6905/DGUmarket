# 거래후기 작성하기

### 수정사항 3.17 예외사항 추가
거래후기 작성완료 버튼 누를 시
1. 상대방이 탈퇴하였을 경우
2. 상대방이 이용제재 조치 받고 있는 유저일 경우
3. 상대방의 물건이 삭제되었을 경우
4. 상대방의 물건이 관리자에 의해 블라인드 처리 되었을 경우
5. 내가 상대방을 차단했을 경우
6. 상대방이 나를 차단했을 경우
7. 만약 두명 모두 서로를 차단했을 경우(5번을 따라간다.)
   ㅁㅁ
   채팅방에서 거래완료 후기를 작성한 후에 확인 버튼을 누를 떄 아래의 엔드포인트로 서버로 요청한다.
   (또한 추후에)
   내 아이템 페이지에서 구매물품을 볼 수 있는 화면 중 구매후기를 작성하지 않은 물건에 대해서 [거래후기작성] 클릭시
   아래의 엔드포인트로 요청하여 거래후기를 작성할 수 있다.

**URL** : `/api/product/{product-id}/comment`

**Method** : `POST`

**Authentication required** : `yes`

**Request Body** :

`product_comment` : 거래후기 내용

 ```json

{
    "product_comment" : "정말로 친절하세요! 또 거래하고 싶습니다!!" 
}

```

## Success Responses

___

**Code** : `201 (created)`

**Response Header** :
`location` : `/api/product/{product-id}/comment` , HTTP location 헤더는 보통 새롭게 생성된 자원(201 상태코드)의 위치에
대한 정보를 제공하기 휘새 브라우저를 요청하는 이 상황에서 사용되는 응답헤더이다. 필요한 경우 해당 location 에 있는 엔드포인트에 다시 요청을 하여
서버로 부터 원하는 정보를 가져올 수 있다.

**Response Body**

Posted successfully



### 예외사항 (response)

거래후기를 남기려고 할 때 구매한 물건이 블라인드 처리되었는 지 삭제되었는지
또는 상대방이 유저제재/차단/탈퇴 되었는 지 상태에 따라 다른 예외응답값이 내려온다.

1. 상대방(판매자)이 이용제재 조치 받고 있는 유저일 경우
2. 상대방(판매자)의 물건이 삭제되었을 경우
3. 상대방(판매자)의 물건(내가 구매후기를 작성하려고 하는 해당 물건)이 관리자에 의해 블라인드 처리 되었을 경우
4. 내가 상대방(판매자)을 차단했을 경우
5. 상대방(판매자)이 나를 차단했을 경우
6. 만약 두명 모두 서로를 차단했을 경우(5번을 따라간다.)

### 1. 상대방(판매자)이 이용제재 조치 받고 있는 유저일 경우

```json

{
    "statusCode": 400,
    "timestamp": "2021-03-18T05:42:46.242+00:00",
    "message": "이용제재를 받고 있는 유저와 거래후기를 작성할 수 없습니다.",
    "description": "uri=/api/product/20/comment"
}

```


### 2. 상대방(판매자)의 물건이 삭제되었을 경우

```json

{
    "statusCode": 404,
    "timestamp": "2021-03-18T05:42:46.242+00:00",
    "message": "해당 중고물품은 삭제처리되었습니다..",
    "description": "uri=/api/product/20/comment"
}

```


### 3. 상대방(판매자)의 물건이 관리자에 의해 블라인드 처리 되었을 경우

```json

{
    "statusCode": 400,
    "timestamp": "2021-03-18T05:42:46.242+00:00",
    "message": "해당 중고물품은 관리자에 의해 비공개 처리되어 거래후기를 작성할 수 없습니다.",
    "description": "uri=/api/product/20/comment"
}

```



### 4. 내가 상대방(판매자)을 차단했을 경우


```json

{
    "statusCode": 400,
    "timestamp": "2021-03-18T05:42:46.242+00:00",
    "message": "차단하신 유저에게 거래후기를 작성할 수 없습니다.",
    "description": "uri=/api/product/20/comment"
}

```


### 5. 상대방(판매자)이 나를 차단했을 경우(물건을 올린 사람이 나를 차단한 경우)


```json

{
    "statusCode": 400,
    "timestamp": "2021-03-18T05:42:46.242+00:00",
    "message": "해당 유저에게 차단 당하여 거래후기를 작성할 수 없습니다.",
    "description": "uri=/api/product/20/comment"
}

```


### 6. 만약 두명 모두 서로를 차단했을 경우(5번을 따라감)

```json

{
    "statusCode": 400,
    "timestamp": "2021-03-18T05:42:46.242+00:00",
    "message": "차단하신 유저에게 거래후기를 작성할 수 없습니다.",
    "description": "uri=/api/product/20/comment"
}

```