## 회원가입 2단계 - 핸드폰 인증 

회원가입 2단계에서는 아래  API가 포함됩니다.

- 핸드폰 번호 중복체크 API
- **핸드폰 인증문자 발송 API** 
- 핸드폰 인증 API 



### 핸드폰 인증문자 발송 API 

회원가입 2단계 - 유저가 입력한 핸드폰 번호로 인증 문자를 전송합니다. (핸드폰 번호 중복체크를 통과한 경우에만 인증문자를 발송할 수 있습니다.)

(인증 문자 6자리 숫자 조합)

**URL** : `/api/send-sms/verify-phone`  

**Method** : `POST`

**Authentication** : 인증 필요 X  

**Request Body** : 

```json
{
    "webMail" : "tkyoun94@naver.com", // 웹메일은 2단게 페이지 접근 시 응답 헤더에 포함되어 있습니다. (그림 1 참고)
    "phoneNumber" : "01000000000" // - 없이 숫자만 입력 
}
```



![핸드폰 인증문자 발송 API 그림<1>](./imgs/img1.png)

​				<그림 : 링크를 통해 회원가입 2단계 페이지 응답 정상적으로 받았을 때 Response Headers> 

___

**Response**

```json
[HTTP/1.1 200 OK]
// 인증문자 발송된 경우 -> 메시지 값을 그래도 안내 메시지로 띄어 주시면 됩니다. 
{
    "statusCode": 200,
    "message": "인증문자가 발송됐습니다.",
    "responseData": null
}

// 인증문자 발송이 실패된 경우

[HTTP/1.1 200 OK]
// 회원가입을 진행중인 유저를 식별하지 못하는 경우 입니다. 
// 이 경우에는 아래 'pathToMove' 메인 페이지 경로 값을 참조해서 메인 페이지로 이동시키시면 됩니다.
// 이 때 "잘못된 접근입니다." Alert를 띄우고 메인 페이지가 렌더링 될 수 있도록 처리해주시면 됩니다. 
{
    "statusCode": 301,
    "timestamp": "2021-03-23T10:45:06.808+00:00",
    "message": "회원 절차에 있는 예비 회원정보를 찾을 수 없는 경우",
    "requestPath": "/api/send-sms/verify-phone",
    "pathToMove": "/shop/main/index"
}


[HTTP/1.1 200 OK]
// 알리고 서버에서 문자 전송 실패했을 경우는 'statusCode'가 0보다 작은 경우입니다. 
// 'statusCode'가 0보다 작은 경우, 실패 사유를 확인할 수 있습니다. 

// 문자 전송 실패의 경우 
// "인증문자 발송이 실패했습니다. 다시 한 번 시도하시고 계속 문제가 있는 경우 관리자에게 문의해주세요."
// 메시지를 안내해주시면 됩니다. 

// 이 경우에는 아래 보신 것과 같이 'pathToMove'가 null 입니다. 
// (= 페이지 이동이 아니라, 위에 말씀드린 안내 메시지를 출력만 해주시면 됩니다!)
{
    "statusCode": 0 보다 작은 경우, (ex -1, -102, ..)
    "timestamp": "2021-03-20T01:33:27.427+00:00",
    "message": "알리고 문자 전송 실패, 실패 사유 : '실패사유'",
    "requestPath": "/api/send-sms/verify-phone",
    "pathToMove": null
}


// * 2021-04-03 추가된 부분 *
// 1일 최대 5회 인증문자 발송 제한 관련 응답
{
    "statusCode": 1,
    "message": "1일 5회 이상 요청 제한으로 인증문자 발송 실패",
    "responseData": null
}

```