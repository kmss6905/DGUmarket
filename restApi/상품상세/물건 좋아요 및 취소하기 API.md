# 물건 좋아요 ( 좋아요 취소하기 )


* 인증여부 : 필요


로그인한 유저가 관심물건리스트 혹은 개별 물건페이지에서 좋아요를 하거나 했던 좋아요를 취소하는 기능이다.
개별 물건페이지에서 좋아요를 했다면 관심목록리스트 좋아요한 물건이 추가된다.


### request body(json)

`product_id` : 좋아요(또는 좋아요 취소) 하려는 물건의 고유 번호

`current_like_status` : 현재 물건의 좋아요 유무 상태( "like" = 내가 현재 해당 물건에 대해서 좋아요 중, "nolike" = 내가 현재 해당 물건에 대해서 좋아요 하고 있지 않음)


### response body

`message`: 응답메시지,
`status`: 응답코드,
`data`: 현재 좋아요|좋아요 취소한 물건의 현재 좋아요 상태

--- 
example response body


좋아요 신청 및 성공시
```
{
    "message": "좋아요 요청",
    "status": 200,
    "data": "current_status_like"
}
```

---

좋아요 취소 신청 및 성공시

```
{
    "message": "좋아요 취소 요청",
    "status": 200,
    "data": "current_status_nolike"
}
```


추가적으로 예외처리(404, 400 .. )에 대해서 어떻게 클라이언트가
대처해야하는 지에 대한 내용은 추후에 알려주도록 하겠습니다. 종합적인 설계가 필요해서 혼동되지 않게 알려드리겠습니다.

### except response (예외응답)


### 차단한 관계에 있는 유저의 물건에 좋아요 및 좋아요취소하기 요청시

* 에초에 차단관계에 있는 물건은 조회조차 불가능하다. 이 경우는 먼저 물건페이지에 들어간 상태에서 상대방이 나를
  또는 내가(다른 브라우저에서)상대방을 차단 한 경우를 뜻한다. 이때 만약 좋아요를 누르게 되면 서버에서는 차단관계에 있는 관계
  를

```json

{
  "statusCode": 410,
  "timestamp": "2021-02-19T17:15:13.721+00:00",
  "message": "차단한 유저 혹은 차단된 유저의 물건에 접근할 수 없습니다.",
  "description": "uri=/api/product/product-like"
}

```

### 로그인하지 않고 요청했을 경우

* 로그인하시겠습니까 라는 팝업창과 함께 로그인을 유도하도록 한다. 원한다면 취소 버튼을 눌러 계속 해당
  페이지에 남아있을 수 있도록 한다.

```json

{
  "statusCode": 401,
  "timestamp": "2021-02-26T11:16:46.318+00:00",
  "message": "로그인이 필요한 서비스입니다.",
  "description": "uri=/api/product/like"
}


```

### 존재하지 물건에 대해서 요청을 할 때(삭제되었을 경우)

* 이 경우 물건이 존재하지 않는 데 해당페이지에 들어가 있는 상태이다. 즉 나는 해당 물건페이지에 있는 데 그 순간
  그 물건을 올린유저가 물건을 삭제한 경우이다. 이렇게 되었을 경우는 해당 물건페이지에 대한 정보를 더 이상 보여주면
  안되기 때문에 클라이언트는 해당 경고문구가 왔을 경우는 바로 인덱스페이지로 이동시켜야 한다.

```json

{
    "statusCode": 404,
    "timestamp": "2021-02-19T17:14:07.623+00:00",
    "message": "해당 게시물은 존재하지 않습니다.",
    "description": "uri=/api/product/product-like"
}

```


### 탈퇴한 유저의 물건에 대해서 좋아요(좋아요취소)를 요청했을 경우

* 이 경우도 해당 물건 페이지에 계속 머무르는 동안에 해당 물건을 올린유저가 탈퇴한 상황이다. 이 물건페이지에
  들어온 유저는 인덱스페이지로 이동시켜야한다. 따라서 아래의 응답메시지를 받았을 경우 역시 인덱스페이지로 강제로
  이동시킨다.

```json

{
    "statusCode": 404,
    "timestamp": "2021-02-26T11:16:46.318+00:00",
    "message": "탈퇴한 유저 입니다.",
    "description": "uri=/api/product/like"
}


```